<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Event Bubbling Example</title>
  <link rel="stylesheet" href="modal.css">
</head>

<body class="modal-lock">
  <div class="grid-container">
    <h3>Rest of Page</h3>
  </div>
  <div class="modal-overlay open" id="modalOverlay">
    <div class="modal-backdrop">
      <div class="modal-container">
        <div class="modal-dialog" role="dialog" id="modalDialog">
          <div class="modal-body grid-container fluid">
            <h3>Hello There!</h3>
            <p>When the user clicks outside of the modal dialog, the modal dialog should close. But if we attach the event to
              the body, it will close when we click inside of the modal too. How can we stop this without changing the CSS
              or HTML?</p>
          </div>
          <button type="button" class="button modal-close sticky" aria-label="Close dialog" id="closeButton">&times;</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    (function () {
      var body = document.getElementsByTagName('body')[0];
      var modalOverlay = document.getElementById('modalOverlay');
      var modalDialog = document.getElementById('modalDialog');
      var closeButton = document.getElementById('closeButton');

      function closeModal() {
        body.classList.remove('modal-lock');
        modalOverlay.classList.remove('open');
      }

      closeButton.addEventListener('click', closeModal);
      body.addEventListener('click', closeModal);
      // Solution - replaces line above with:    
      // body.addEventListener('click', function(e) {
      //   if (e.target.contains(modalDialog.parentNode)) closeModal();
      // });
    })()
  </script>
</body>

</html>